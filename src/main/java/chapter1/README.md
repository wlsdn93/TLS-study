# 키 교환 알고리즘

카이사르 암호화 같이, 암호화와 복호화에 쓰이는 키가 동일한 방식은 미리 해당 키를 교환해둬야만 했다.   

그러나 현대의 인터넷 환경에서, 모든 사용자들과 미리 비밀키를 공유 한다는 것은 불가능했다.

"디피-헬먼 키 교환 알고리즘"은 이러한 한계점을 해결하기 위해 제시되었다. 

해당 알고리즘은 ***"출제자는 문제를 내기 쉽지만, 문제를 푸는 사람은 풀기가 매우 어려운 수학 문제를 이용하는 것"*** 이다.  

그리고 이러한 문제의 대표적인 예가 **소인수분해** 이다.  

출제자는 그저 적당한 두 개의 소수를 선택해서 곱하고, 풀이자에게 이를 소인수분해 하라고 시키는 것이다.

소수의 크기가 작을 때는 어려워보이지 않지만, 두 소수의 크기가 커질수록 난이도는 기하급수적으로 증가한다.  

---
## 디피-헬먼 알고리즘의 기본 원리

두 사람 Alice 와 Bob 이 비밀통신을 하고자 한다.

1. 우선 공개적으로 사용할 하나의 소수를 선택한다. 이를 g 라고 하자.
2. Alice와 Bob은 각각 비밀키로 사용 할 서로 다른 임의의 소수를 선택한다. 이 들을 각각 sa, sb 라고 하자.
3. Alice와 Bob은 공개된 소수인 g를 각각의 비밀키로 거듭제곱 해서, 서로에게 전달한다. 이 값들은 공개키에 해당되며, 각각 pa, pb 라고 하자.
- pa = g^sa
- pb = g^sb  

4. Alice와 Bob은 서로 전달받은 공개키를 각각의 비밀키로 다시 거듭제곱 하면, Alice와 Bob은 동일한 키값인 K를 갖게된다. 
- pa^sb = (g^sa)^sb = K  
- pb^sa = (g^sb)^sa = K  

---

## 나머지를 이용한 계산의 간소화 

매우 큰 수의 거듭제곱한 숫자를 특정 숫자로 나눈 나머지를 구해야 하는 경우, 처음부터 나머지 연산을 이용하면 계산이 훨씬 간단해진다.  

예를 들어 3의 100제곱을 23으로 나눈 나머지를 구해야 한다고 해보자.  

```text
mod 는 나머지 연산을 의미한다. 예를 들어 10 mod 4 는 2 이다.

3^100 mod 23
= (3^4)^25 mod 23
= (23 * 3 + 12)^25 mod 23
= 12^25 mod 23
```
이러한 식이 성립하는 이유는 아래와 같다. 
조금 더 이해하기 쉽도록 작은 숫자로 나머지 연산을 수행해보자.

```text
19의 3제곱을 5로 나눈 나머지를 구한다고 해보자. 
19^3 mod 5 
= (5 * 3 + 4)^3 mod 5
= 4^3 mod 5

(5 * 3 + 4)*(5 * 3 + 4)*(5 * 3 + 4) 이 식을 전개 하면 어떻게 될 까?
고등학교 수학 시간에 암기하는 공식을 떠올려 보자 
(a + b)^3 는 a^3 + 3a^2b + 3ab^2 + b^3 와 같다.
즉 마지막 b^3 을 제외한 나머지 모든 항들은 a로 나누어 떨어진다. 
```



